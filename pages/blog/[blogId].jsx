import firebaseApp from '../../firebase/firebaseConfig';
import firebaseConfig from '../../firebase/firebaseConfig';
import { getFirestore, collection, query, where, getDocs  } from 'firebase/firestore';
import { Icon } from '@iconify/react';
import Head from 'next/head';
import Link from 'next/link';
import { useRouter } from 'next/router';
import React from 'react';
import Cta from '../../components/Cta';
import Div from '../../components/Div';
import Layout from '../../components/Layout';
import PageHeading from '../../components/PageHeading';
import Sidebar from '../../components/Sidebar.jsx';
import Spacing from '../../components/Spacing';
import { useEffect, useState } from 'react';


export default function BlogDetails() {
  const router = useRouter();
  const blogId = router.query.blogId;
  const [blogData, setBlogData] = useState(null);
  const db = getFirestore(); 

  useEffect(() => {
    if (blogId) {
      // blogId is defined, proceed with Firestore query
      const portfolioCollection = collection(db, 'PortfolioDetails');
      const q = query(portfolioCollection, where('portfolio_slug', '==', blogId));

      getDocs(q)
        .then((querySnapshot) => {
          querySnapshot.forEach((doc) => {
            // Store the blog data in the state
            setBlogData(doc.data());
            console.log(doc.data)
          });
        })
        .catch((error) => {
          console.error('Error getting documents: ', error);
        });
    }
  }, [blogId]); // Add blogId as a dependency for the useEffect
  const bgSrc = blogData ? blogData.imageURL : '/images/default_bg.jpg';
  const title = blogData ? blogData.portfolio_title : "sadasd";

  return (
    <>
      <Head>
        <title>Blog - {blogId}</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Layout>
        {/* Start Page Heading Section */}
        <PageHeading
          title="Blog Single"
          bgSrc="/images/blog_details_hero_bg.jpeg"
          pageLinkText={blogId}
        />
        {/* End Page Heading Section */}
        

        {/* Start Blog Details */}
        <Spacing lg="150" md="80" />
        <Div className="container">
        <img
            src={bgSrc} 
            alt="Details"
            className="cs-radius_15 w-100"
          />
          <Spacing lg="90" md="40" />
          <Div className="row">
            <Div className="col-lg-8">
              {/* Start Details Post Content */}
              <Div className="cs-post cs-style2">
               
                <Div className="cs-post_info">
                  <Div className="cs-post_meta cs-style1 cs-ternary_color cs-semi_bold cs-primary_font">
                    <span className="cs-posted_by">07 Mar 2022</span>
                    <Link href="/blog" className="cs-post_avatar">
                      Tech
                    </Link>
                  </Div>
                  <h2 className="cs-post_title">
                  {title}
                  </h2>
                  <p>
                    Elit scelerisque mauris pellentesque pulvinar pellentesque
                    habitant morbi tristique. Tortor posuere ac ut consequat
                    semper viverra nam libero justo. Mauris commodo quis
                    imperdiet massa tincidunt nunc pulvinar sapien et. Aliquam
                    purus sit amet luctus venenatis lectus magna fringilla urna.
                    Purus sit amet luctus venenatis lectus. Nunc aliquet
                    bibendum enim facilisis. Pretium viverra suspendisse potenti
                    nullam ac tortor vitae.
                  </p>
                  <blockquote className="cs-primary_font">
                    But I must explain to you how all this mistaken idea of
                    denouncing pleasure and praising pain was born and I will
                    give you a complete account of the system, who expound the
                    actual teachings of the great explorer of the truth, the
                    master.
                    <small>Loren Mulari</small>
                  </blockquote>
                  <p>
                    On the other hand, we denounce with righteous indignation
                    and dislike men who are so beguiled and demoralized by the
                    charms of pleasure of the moment, so blinded by desire, that
                    they cannot foresee the pain and trouble that are bound to
                    ensue; and equal blame belongs to those who fail in their
                    duty through weakness of will, which is the same as saying
                    through shrinking from toil and pain. These cases are
                    perfectly simple and easy to distinguish. In a free hour,
                    when our power of choice is untrammelled and when nothing
                    prevents our being able to do what we like best, every
                    pleasure is to be welcomed and every pain avoided. But in
                    certain circumstances and owing to the claims of duty or the
                    obligations of business it will frequently occur that
                    pleasures have to be repudiated.
                  </p>
                  <Div className="row">
                    <Div className="col-md-6">
                      <img
                        src="/images/blog_details_img_1.jpeg"
                        alt="Blog Details"
                        className="cs-radius_15 w-100"
                      />
                      <Div className="cs-height_45 cs-height_lg_45" />
                    </Div>
                    <Div className="col-md-6">
                      <img
                        src="/images/blog_details_img_2.jpeg"
                        alt="Blog Details"
                        className="cs-radius_15 w-100"
                      />
                      <Div className="cs-height_45 cs-height_lg_45" />
                    </Div>
                  </Div>
                  <h3>Art is powerful and imaginary source</h3>
                  <p>
                    we denounce with righteous indignation and dislike men who
                    are so beguiled and demoralized by the charms of pleasure of
                    the moment, so blinded by desire, that they cannot foresee
                    the pain and trouble that are bound to ensue; and equal
                    blame belongs to those who fail in their duty through
                    weakness of will, which is the same as saying through
                    shrinking from toil and pain. These cases are perfectly
                    simple and easy to distinguish. In a free hour, when our
                    power of choice is untrammelled and when nothing prevents
                    our being able to do what we like best, every pleasure is to
                    be welcomed and every pain avoided. But in certain
                    circumstances.
                  </p>
                  <p>
                    So, blinded by desire, that they cannot foresee the pain and
                    trouble that are bound to ensue; and equal blame belongs to
                    those who fail in their duty through weakness of will, which
                    is the same as saying through shrinking from toil and pain.
                    These cases are perfectly simple and easy to distinguish. In
                    a free hour, when our power of choice is untrammelled and
                    when nothing prevents our being able to do what we like
                    best, every pleasure is to be welcomed and every pain
                    avoided. But in certain amount of people.
                  </p>
                </Div>
              </Div>
              {/* End Details Post Content */}

              {/* Start Comment Section */}
              <Spacing lg="30" md="30" />
              <h2 className="cs-font_50 cs-m0">Leave A Reply</h2>
              <Spacing lg="5" md="5" />
              <p className="cs-m0">
                Your email address will not be published. Required fields are
                marked *
              </p>
              <Spacing lg="40" md="30" />
              <form className="row">
                <Div className="col-lg-6">
                  <label>Full Name*</label>
                  <input type="text" className="cs-form_field" />
                  <Div className="cs-height_20 cs-height_lg_20" />
                  <Div
                    data-lastpass-icon-root="true"
                    style={{
                      position: 'relative !important',
                      height: '0px !important',
                      width: '0px !important',
                      float: 'left !important',
                    }}
                  />
                </Div>
                <Div className="col-lg-6">
                  <label>Email*</label>
                  <input type="text" className="cs-form_field" />
                  <Div className="cs-height_20 cs-height_lg_20" />
                </Div>
                <Div className="col-lg-12">
                  <label>Website*</label>
                  <input type="text" className="cs-form_field" />
                  <Div className="cs-height_20 cs-height_lg_20" />
                </Div>
                <Div className="col-lg-12">
                  <label>Write Your Comment*</label>
                  <textarea cols={30} rows={7} className="cs-form_field" />
                  <Div className="cs-height_25 cs-height_lg_25" />
                </Div>
                <Div className="col-lg-12">
                  <button className="cs-btn cs-style1">
                    <span>Send Message</span>
                    <Icon icon="bi:arrow-right" />
                  </button>
                </Div>
              </form>
              {/* End Comment Section */}
            </Div>
            <Div className="col-xl-3 col-lg-4 offset-xl-1">
              {/* Start Sidebar */}
              <Spacing lg="0" md="80" />
              <Sidebar />
              {/* End Sidebar */}
            </Div>
          </Div>
        </Div>
        <Spacing lg="150" md="80" />
        {/* Start Blog Details */}

        {/* Start CTA Section */}
        <Div className="container">
          <Cta
            title="Let’s disscuse make <br />something <i>cool</i> together"
            btnText="Apply For Meeting"
            btnLink="/contact"
            bgSrc="/images/cta_bg.jpeg"
          />
        </Div>
        {/* End CTA Section */}
      </Layout>
    </>
  );
}
